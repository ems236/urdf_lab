<launch>
    <!-- Create an argument to determine whether to use a XACRO or URDF file. -->
    <arg name="use_xacro" default="false" />

    <arg name="GUI" default="true" />
    <param name="use_gui" value="$(arg GUI)"/>

    <!-- Run the robot_state_publisher. -->
    <node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher" />
    <node if="$(arg GUI)" pkg="joint_state_publisher" type="joint_state_publisher" name="joint_state_publisher" />

    <!-- What is the name of the file to use? This can be passed into the launch file.-->
    <arg if="$(arg use_xacro)" name="filename" default="robot.xacro" />
    <arg unless="$(arg use_xacro)" name="filename" default="robot.urdf" />

    <!-- The full path of the URDF file can be passed into the launch file instead.-->
    <arg name="file" default="$(find urdf_lab)/urdf/$(arg filename)" />

    <!-- Use the file argument as the name of the file used lto set the /robot_description parameter on the parameter server -->
    <param if="$(arg use_xacro)" name="robot_description" command="xacro --inorder $(arg file)" />
    <param unless="$(arg use_xacro)" name="robot_description" textfile="$(arg file)" />


    <node pkg="tf2_ros" type="static_transform_publisher" name="left_wheel_publisher" args="-0.10 0.4 0.0 0 -1.57 0.0 base wheel_left"/>
    <node pkg="tf2_ros" type="static_transform_publisher" name="right_wheel_publisher" args="-0.10 -0.4 0.0 0 -1.57 0.0 base wheel_right"/>
    <node pkg="tf2_ros" type="static_transform_publisher" name="center_wheel_publisher" args="0.1 0.0 0.0 0 -1.57 0.0 base wheel_center"/>


    <!-- Run RVIZ and use a specific configuration file. If RVIZ is closed, close everything. -->
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find urdf_lab)/config/config.rviz" required="true" />
</launch>